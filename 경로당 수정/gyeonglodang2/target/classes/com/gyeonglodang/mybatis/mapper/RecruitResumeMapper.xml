<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gyeonglodang.mybatis.mapper.RecruitResumeMapper">
	
	<select id="getTitle" parameterType="int" resultType="jobNoticeDTO">
		<![CDATA[
			select * from jobNotice_board where companyidx = #{companyidx}
		]]>
	</select>
	
	<select id="getApplicant" parameterType="String" resultType="ApplicantDTO">
		<![CDATA[
			select * from applicant where email = #{email}
		]]>
	</select>
	
	<select id="getApplicant2" parameterType="Map" resultType="ApplicantDTO">
		<![CDATA[
			select * from applicant where email = #{email} and #{gonggoidx}
		]]>
	</select>
	
	<insert id="insertApplicant" parameterType="ApplicantDTO">
		<![CDATA[
			insert into applicant (gonggoidx, email, password) values(#{gonggoidx}, #{email}, #{password});
		]]>	
	</insert>
	
	<update id="updateField" parameterType="Map">
		<![CDATA[
			update applicant set field = #{recruitCateg_categ} where gonggoidx=#{gonggoidx} and email=#{email}
		]]>	
	</update>
	
	<update id="updateScode" parameterType="Map">
		<![CDATA[
			update applicant set scode = #{scode} where gonggoidx=#{gonggoidx} and email=#{email}
		]]>	
	</update>
	
	<select id="getFieldCode" parameterType="Map" resultType="String">
		<![CDATA[
			select recruitCateg_testID from recruitcateg_board where recruitCateg_categ = #{recruitCateg_categ} and noticeControl_idx = #{gonggoidx} 
		]]>
	</select>
	
	<select id="getCountScode" parameterType="int" resultType="String">
		<![CDATA[
			select count(a.scode) from applicant a where gonggoidx=#{noticeControl_idx}
		]]>
	</select>
	
	<select id="getCategScode" parameterType="Map" resultType="Map">
		<![CDATA[
			select scode,field from applicant a where gonggoidx=#{gonggoidx} and email=#{email}
		]]>
	</select>
	
	<select id="getJobNoticeList" parameterType="Map" resultType="JobNoticeDTO">
		<![CDATA[
			select jb.noticeControl_idx, jb.companyIdx, jb.jobNotice_title, jb.jobNotice_operation, jb.jobNotice_postingDate, rb.recruitCateg_categ  
			from jobnotice_board jb , recruitcateg_board rb 
			where jb.noticeControl_idx = rb.noticeControl_idx 
			and rb.companyIdx = #{companyIdx}
			and rb.noticeControl_idx=#{gonggoidx};
		]]>
	</select>
	
	<select id="getJBTittle" parameterType="int">
		<![CDATA[
			select jobnotice_title from jobnotice_board where noticeControl_idx=#{noticeControl_idx};
		]]>
	</select>
	
	<select id="getPersonalList" parameterType="int">
		<![CDATA[
			select * from personal p where idx=#{personalidx};
		]]>
	</select>
	
	<select id="getPersonalQList" resultType="GetPersonalQDTO">
		<![CDATA[
			select * from personalq;
		]]>
	</select>
	
	
	<insert id="insertPersonalValue" parameterType="Map">
		insert into personalanswer (gonggoidx,email,value)
		values (#{gonggoidx},#{email},#{value});
	</insert>
	
	<update id="insertCareerValue" parameterType="Map">
		insert into careeranswer (gonggoidx,email,value)
		values (#{gonggoidx},#{email},#{value});
	</update>
	
	<select id="getCareerList" parameterType="int">
		<![CDATA[
			select * from career where idx=#{careeridx};
		]]>
	</select>
	
	<select id="getCareerQList" resultType="GetCareerQDTO">
		<![CDATA[
			select * from careerq;
		]]>
	</select>
	
	<select id="getPersonalCustom" parameterType="int">
		<![CDATA[
			select * from infocustom where idx = #{infocustomidx};
		]]>
	</select>
	
	
	<select id="getResumeCustom" parameterType="int" resultType="com.gyeonglodang.dto.GetResumeCustomDTO">
		<![CDATA[
			select idx, gonggoidx, customTitle, customField, customNotice from resumecustom where idx=#{resumecustomidx};
		]]>
	</select>
	
	<select id="getSentenceType" parameterType="int" resultType="com.gyeonglodang.dto.GetSentenceTypeDTO">
		<![CDATA[
			select * from sentencetype s where resumecustomidx=#{resumeCustomIdx};
		]]>
	</select>
	
	<select id="getTableTypeList" parameterType="int" resultType="com.gyeonglodang.dto.GetTableTypeDTO">
		select * from tabletype where resumecustomidx=#{resumeCustomIdx};
	</select>
	
	<select id="getTableTypeQListAll"  resultType="com.gyeonglodang.dto.GetTableTypeQDTO">
		select * from tabletypeq ;
	</select>
	
	<update id="insert_infocustom" parameterType="Map">
		insert into infocustom_value (gonggoidx,email,value)
		values (#{gonggoidx},#{email},#{value});
	</update>
	
	
	<insert id="insert_setence" parameterType="Map">
		insert into sentencetype_value (gonggoidx, email, value)
		values(#{gonggoidx}, #{email}, #{value});
	</insert>
	
	<insert id="insert_table" parameterType="Map">
		insert into tabletype_value (gonggoidx, email, value)
		values(#{gonggoidx}, #{email}, #{value});
	</insert>
	
	<insert id="insert_info" parameterType="Map">
		INSERT INTO info_value (
        gonggoidx, email, name, birth_year, birth_month, birth_date, 
        zipcode, roadname, detail_address, 
        phone_frontnum, phone_middlenum, phone_backnum, emergency_frontnum, emergency_middlenum, emergency_backnum, 
        lowerclass, disabled, army, youth
    ) VALUES (
        #{gonggoidx}, #{email},#{name}, #{year}, #{month}, #{date}, 
        #{zipcode}, #{roadname}, #{detail_address}, 
        #{phone_frontnum}, #{phone_middelnum}, #{phone_backnum}, #{emergency_frontnum}, #{emergency_middlenum}, #{emergency_backnum},
        #{lowerclass}, #{disabled}, 
        #{army}, #{youth}
    )	
	</insert>
	
	<select id="getInfo" parameterType="int">
		<![CDATA[
			select * from info where gonggoidx = #{noticeControl_idx};
		]]>
	</select>
	
	<select id="getPersonalValueList" parameterType="Map" resultType="String">
		<![CDATA[
			select value from personalanswer where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	<select id="getCareerValueList" parameterType="Map" resultType="String">
		<![CDATA[
			select value from careeranswer where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	<select id="getInfoCustomValueList" parameterType="Map" resultType="String">
		<![CDATA[
			select value from infocustom_value where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	<select id="getSentenceValueList" parameterType="Map" resultType="String">
		<![CDATA[
			select value from sentencetype_value where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	<select id="gettableValueList" parameterType="Map" resultType="String">
		<![CDATA[
			select value from tabletype_value where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	<select id="getinfoValue" parameterType="Map" resultType="GetInfoValueDTO">
		<![CDATA[
			select * from info_value where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	<select id="getFileValueList" parameterType="Map" resultType="com.gyeonglodang.dto.GetFileValueDTO">
		<![CDATA[
			select * from applicant_upload_file where gonggoidx=#{gonggoidx} and email=#{email};
		]]>
	</select>
	
	
	<select id="getInfoCustomIdxList" parameterType="Map" resultType="Integer">
		<![CDATA[
			select idx from infocustom i where gonggoidx =#{gonggoidx} and infoCustomField =0 or 
			idx in (select infoCustomField_idx from infocustomfieldsetting i2 where noticeControl_idx = #{gonggoidx} and infoCustomField = #{recruitCateg_categ});
		]]>
	</select>
	
	<select id="getPersonalIdxList" parameterType="Map" resultType="Integer">
		<![CDATA[
			select idx from personal p where gonggoidx =#{gonggoidx} and personalField =0 or 
			idx in (select personalField_idx from personalfieldsetting p2 where noticeControl_idx =#{gonggoidx} and personalField = #{recruitCateg_categ});
		]]>
	</select>
	
	<select id="getCareerIdxList" parameterType="Map" resultType="Integer">
		<![CDATA[
			select idx from career c where gonggoidx =#{gonggoidx} and careerField =0 or 
			idx in (select careerField_idx from careerfieldsetting c2 where noticeControl_idx=#{gonggoidx} and careerField = #{recruitCateg_categ});
		]]>
	</select>
	
	<select id="getResumeCustomIdxList" parameterType="Map" resultType="Integer">
		<![CDATA[
			select idx from resumecustom r where gonggoidx=#{gonggoidx} and customField =0 or 
			idx in (select customField_idx from customfieldsetting c where noticeControl_idx =#{gonggoidx} and CustomField = #{recruitCateg_categ});
		]]>
	</select>
	
	<select id="getFileIdxList" parameterType="Map" resultType="Integer">
		<![CDATA[
			select rsmfileupload_idx from rsmfileupload_table rt 
			where rsmfile_idx in (select rsmfile_idx from rsmfile r where gonggoidx =#{gonggoidx}) and rsmfileupload_field=0 or rsmfileupload_idx 
			in (select rsmfileupload_field_idx from rsmfileuploadfieldsetting r where noticeControl_idx = #{gonggoidx} and fileField = #{recruitCateg_categ});
		]]>
	</select>
	
	<select id="getResumeFile" parameterType="int">
		<![CDATA[
			select * from rsmfile where gonggoidx=#{noticeControl_idx};
		]]>
	</select>
	
	<select id="getRsmFileUpload" parameterType="int">
		<![CDATA[
			select * from rsmfileupload_table where rsmfileupload_idx=#{fileidx};
		]]>
	</select>
	
	<insert id="insertResumeFile" parameterType="Map">
		<![CDATA[
			insert into applicant_upload_file (gonggoidx, email, applicant_file_Original, applicant_file_filePath)
			values(#{gonggoidx}, #{email}, #{Original_Name},#{uploadPath});
		]]>
	</insert>
	
	<delete id="deletePersonalValue" parameterType="Map">
		delete from personalanswer where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<delete id="deleteCareerValue" parameterType="Map">
		delete from careeranswer where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<delete id="deleteSentenceValue" parameterType="Map">
		delete from sentencetype_value where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<delete id="deleteInfoCustomValue" parameterType="Map">
		delete from infocustom_value where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<delete id="deleteTableValue" parameterType="Map">
		delete from tabletype_value where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<delete id="deleteInfoValue" parameterType="Map">
		delete from info_value where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<delete id="deleteResumeFile" parameterType="Map">
		delete from applicant_upload_file where gonggoidx=#{gonggoidx} and email=#{email}
	</delete>
	
	<insert id="insertPersonalValue_final" parameterType="Map">
		<![CDATA[
			insert into personalanswer_final (gonggoidx, scode, value)
			values(#{gonggoidx}, #{scode}, #{value});
		]]>
	</insert>
	
	<insert id="insertCareerValue_final" parameterType="Map">
		<![CDATA[
			insert into careeranswer_final (gonggoidx, scode, value)
			values(#{gonggoidx}, #{scode}, #{value});
		]]>
	</insert>
	
	<insert id="insert_final_infocustom" parameterType="Map">
		<![CDATA[
			insert into infocustom_final_value (gonggoidx, scode, value)
			values(#{gonggoidx}, #{scode}, #{value});
		]]>
	</insert>
	
	<insert id="insert_final_sentence" parameterType="Map">
		<![CDATA[
			insert into sentencetype_fianl_value (gonggoidx, scode, value)
			values(#{gonggoidx}, #{scode}, #{value});
		]]>
	</insert>
	
	<insert id="insert_final_table" parameterType="Map">
		<![CDATA[
			insert into tabletype_fianl_value (gonggoidx, scode, value)
			values(#{gonggoidx}, #{scode}, #{value});
		]]>
	</insert>
	
	<insert id="insert_final_info" parameterType="Map">
		INSERT INTO info_final_value (
        gonggoidx, scode, name, birth_year, birth_month, birth_date, 
        zipcode, roadname, detail_address, 
        phone_frontnum, phone_middlenum, phone_backnum, emergency_frontnum, emergency_middlenum, emergency_backnum, 
        lowerclass, disabled, army, youth
    ) VALUES (
        #{gonggoidx}, #{scode},#{name}, #{year}, #{month}, #{date}, 
        #{zipcode}, #{roadname}, #{detail_address}, 
        #{phone_frontnum}, #{phone_middelnum}, #{phone_backnum}, #{emergency_frontnum}, #{emergency_middlenum}, #{emergency_backnum},
        #{lowerclass}, #{disabled}, 
        #{army}, #{youth}
    )	
	</insert>
	
	<insert id="insertResumeFile_final" parameterType="Map">
		<![CDATA[
			insert into applicant_upload_file_final (gonggoidx, scode, applicant_file_Original, applicant_file_filePath)
			values(#{gonggoidx}, #{scode}, #{Original_Name},#{uploadPath});
		]]>
	</insert>
	
	<select id="getPersonalValueList_final" parameterType="Map" resultType="String">
		<![CDATA[
			select value from personalanswer_final where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="getCareerValueList_final" parameterType="Map" resultType="String">
		<![CDATA[
			select value from careeranswer_final where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="getInfoCustomValueList_final" parameterType="Map" resultType="String">
		<![CDATA[
			select value from infocustom_final_value where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="gettableValueList_final" parameterType="Map" resultType="String">
		<![CDATA[
			select value from tabletype_fianl_value where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="getSentenceValueList_final" parameterType="Map" resultType="String">
		<![CDATA[
			select value from sentencetype_fianl_value where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="getinfoValue_final" parameterType="Map" resultType="com.gyeonglodang.dto.GetInfoValueFinalDTO">
		<![CDATA[
			select * from info_final_value where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="getFileValueList_final" parameterType="Map" resultType="com.gyeonglodang.dto.GetFileValueFinalDTO">
		<![CDATA[
			select * from applicant_upload_file_final where gonggoidx=#{gonggoidx} and scode=#{scode};
		]]>
	</select>
	
	<select id="getField" parameterType="Recruitcateg_boardDTO" resultType="Recruitcateg_boardDTO">
		select * from recruitcateg_board where noticeControl_idx=#{noticeControl_idx}
	</select>
	
</mapper>